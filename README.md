# PivotalWebAppTestThis projects pupose is to explore pushing a ASP.NET Core 2.0 application to Pivotal Cloud Foundry.The application was created using the ASP.NET Core 2.0 MVC template. Two methods of deployment are possible with .NETCore- **Framework-dependent deployment.** As the name implies, framework-dependent deployment (FDD) relies on the presence of a shared system-wide version of .NET Core on the target system. Because .NET Core is already present, your app is also portable between installations of .NET Core. Your app contains only its own code and any third-party dependencies that are outside of the .NET Core libraries. FDDs contain .dll files that can be launched by using the dotnet utility from the command line. - **Self-contained deployment.** Unlike FDD, a self-contained deployment (SCD) doesn't rely on the presence of shared components on the target system. All components, including both the .NET Core libraries and the .NET Core runtime, are included with the application and are isolated from other .NET Core applications.## Scenario 1 - Self-Contained ASP.NETCore2.0 deployment targeting Windows2012R2**Buildpack:** [HWC Buildpack](https://github.com/cloudfoundry/hwc-buildpack/releases) v2.3.9 (Sept 8, 2017)**Stack:** Windows2012R2**Status:** Working- Open a command prompt at the root of the website. \PivotalWebAppTest\PivotalWebAppTest- Delete previous publish```rmdir /s /q .\bin\publish-windows-sc```- Publish the application```dotnet publish -f netcoreapp2.0 -r win10-x64 -o %CD%\bin\publish-windows-sc --self-contained true```- Push the application```cf push -f manifest-windows-sc.yml -p .\bin\publish-windows-sc```## Scenario 2 - Self-Contained ASP.NETCore2.0 deployment targeting cflinuxfs2**Buildpack:** [Dotnet Core Buildpack](https://github.com/cloudfoundry/dotnet-core-buildpack/releases) v1.0.26 (Sept 8, 2017)**Stack:** cflinuxfs2**Status:** Working- Open a command prompt at the root of the website. \PivotalWebAppTest\PivotalWebAppTest- Delete previous publish```rmdir /s /q .\bin\publish-linux-sc```- Publish the application```dotnet publish -f netcoreapp2.0 -r ubuntu-x64 -o %CD%\bin\publish-linux-sc --self-contained true```- Push the application```cf push -f manifest-linux-sc.yml -p .\bin\publish-linux-sc```## Scenario 3 - Framework-Dependent ASP.NETCore2.0 deployment targeting Windows2012R2**Buildpack:** [HWC Buildpack](https://github.com/cloudfoundry/hwc-buildpack/releases) v2.3.9 (Sept 8, 2017)**Stack:** Windows2012R2**Status:** Failed- Open a command prompt at the root of the website. \PivotalWebAppTest\PivotalWebAppTest- Delete previous publish```rmdir /s /q .\bin\publish-windows-fd```- Publish the application```dotnet publish -f netcoreapp2.0 -r win10-x64 -o %CD%\bin\publish-windows-fd --self-contained false```- Push the application```cf push -f manifest-windows-fd.yml -p .\bin\publish-windows-fd```CF error log:```2017-09-18T16:44:02.154-04:00 [API/0] [OUT] Created app with guid 6327f772-2e0b-4e70-ba43-3ec880ae4bd92017-09-18T16:44:04.252-04:00 [API/0] [OUT] Updated app with guid 6327f772-2e0b-4e70-ba43-3ec880ae4bd9 ({"route"=>"60162e75-76b7-447b-8698-6f287b5f3b09", :verb=>"add", :relation=>"routes", :related_guid=>"60162e75-76b7-447b-8698-6f287b5f3b09"})2017-09-18T16:44:16.789-04:00 [STG/0] [OUT] Downloading hwc_buildpack...2017-09-18T16:44:16.795-04:00 [STG/0] [OUT] Downloaded hwc_buildpack2017-09-18T16:44:16.795-04:00 [STG/0] [OUT] Creating container2017-09-18T16:44:17.087-04:00 [API/0] [OUT] Updated app with guid 6327f772-2e0b-4e70-ba43-3ec880ae4bd9 ({"state"=>"STARTED"})2017-09-18T16:44:19.599-04:00 [STG/0] [OUT] Successfully created container2017-09-18T16:44:19.600-04:00 [STG/0] [OUT] Downloading app package...2017-09-18T16:44:20.292-04:00 [STG/0] [OUT] Downloaded app package (2.9M)2017-09-18T16:44:20.292-04:00 [STG/0] [OUT] Staging...2017-09-18T16:44:20.426-04:00 [STG/0] [OUT] -----> Hwc Buildpack version 2.3.92017-09-18T16:44:20.426-04:00 [STG/0] [OUT] -----> Installing HWC2017-09-18T16:44:20.426-04:00 [STG/0] [OUT] -----> Installing hwc 5.0.02017-09-18T16:44:20.426-04:00 [STG/0] [OUT] Download [https://buildpacks.cloudfoundry.org/dependencies/hwc/hwc-5.0.0-windows-amd64-89274c25.zip]2017-09-18T16:44:20.426-04:00 [STG/0] [OUT] HWC version 5.0.02017-09-18T16:44:21.891-04:00 [STG/0] [OUT] Staging complete2017-09-18T16:44:21.891-04:00 [STG/0] [OUT] Exit status 02017-09-18T16:44:21.892-04:00 [STG/0] [OUT] Uploading droplet...2017-09-18T16:44:21.892-04:00 [STG/0] [OUT] Uploading build artifacts cache...2017-09-18T16:44:21.892-04:00 [STG/0] [OUT] Uploading droplet, build artifacts cache...2017-09-18T16:44:21.932-04:00 [STG/0] [OUT] Uploaded build artifacts cache (169B)2017-09-18T16:44:26.166-04:00 [STG/0] [OUT] Uploaded droplet (3.2M)2017-09-18T16:44:26.167-04:00 [STG/0] [OUT] Uploading complete2017-09-18T16:44:26.205-04:00 [STG/0] [OUT] Destroying container2017-09-18T16:44:26.484-04:00 [STG/0] [OUT] Successfully destroyed container2017-09-18T16:44:26.604-04:00 [CELL/0] [OUT] Creating container2017-09-18T16:44:29.310-04:00 [CELL/0] [OUT] Successfully created container2017-09-18T16:44:30.041-04:00 [APP/PROC/WEB/0] [OUT] Running dotnet.exe .\\PivotalWebAppTest.dll --server.urls http://*:%PORT%2017-09-18T16:44:30.045-04:00 [APP/PROC/WEB/0] [ERR] The system cannot find the file specified2017-09-18T16:44:30.048-04:00 [APP/PROC/WEB/0] [OUT] Exit status 22017-09-18T16:44:30.758-04:00 [CELL/0] [OUT] Exit status -262017-09-18T16:44:30.799-04:00 [CELL/0] [OUT] Destroying container2017-09-18T16:44:31.168-04:00 [API/0] [OUT] Process has crashed with type: "web"2017-09-18T16:44:31.199-04:00 [API/0] [OUT] App instance exited with guid 6327f772-2e0b-4e70-ba43-3ec880ae4bd9 payload: {"instance"=>"", "index"=>0, "reason"=>"CRASHED", "exit_description"=>"2 error(s) occurred:\n\n* Exited with status 2\n* cancelled", "crash_count"=>1, "crash_timestamp"=>1505767471123123025, "version"=>"367b5a5b-1ab7-4716-9602-295cb1403b30"}```## Scenario 4 - Framework-Dependent ASP.NETCore2.0 deployment targeting cflinuxfs2**Buildpack:** [Dotnet Core Buildpack](https://github.com/cloudfoundry/dotnet-core-buildpack/releases) v1.0.26 (Sept 8, 2017)**Stack:** cflinuxfs2**Status:** Working- Open a command prompt at the root of the website. \PivotalWebAppTest\PivotalWebAppTest- Delete previous publish```rmdir /s /q .\bin\publish-linux-fd```- Publish the application```dotnet publish -f netcoreapp2.0 -r ubuntu-x64 -o %CD%\bin\publish-linux-fd --self-contained false```- Push the application```cf push -f manifest-linux-fd.yml -p .\bin\publish-linux-fd```